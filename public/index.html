<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>tankes — combate táctico por turnos</title>
  <link rel="stylesheet" href="style.css?v=0.6.3" />
</head>
<body>
  <main class="wrap">
    <h1>tankes</h1>
    <p class="subtitle">Combate táctico por turnos simultáneos</p>

    <!-- INFO DE SALA -->
    <section class="card">
      <div class="row">
        <div>
          <div class="label">Sala</div>
          <div class="mono" id="roomId">—</div>
          <div class="hint">
            Pulsa <strong>Copiar enlace</strong> y envíalo a otra persona para que se una a la partida.
          </div>
        </div>

        <div>
          <div class="label">Tu rol</div>
          <div class="mono" id="role">—</div>
          <div class="hint">
            Los jugadores son <strong>A</strong> y <strong>B</strong>.  
            El resto de personas entran como <strong>espectadores</strong>.
          </div>
        </div>

        <div class="actions">
          <button id="copyLinkBtn" class="btn">Copiar enlace</button>
          <button id="resetBtn" class="btn btn-secondary">Reset</button>
        </div>
      </div>

      <div class="row">
        <div>
          <div class="label">Turno</div>
          <div class="mono" id="turn">—</div>
        </div>
        <div>
          <div class="label">Acciones pendientes</div>
          <div class="mono" id="pending">—</div>
        </div>
        <div class="grow">
          <div class="label">Estado</div>
          <div class="mono status" id="status">Conectando…</div>
        </div>
        <div>
          <div class="label">Puntuación</div>
          <div class="mono" id="score">—</div>
        </div>
      </div>
    </section>

    <!-- TABLERO -->
    <section class="card">
      <div class="board" id="board" aria-label="Tablero de juego"></div>

        <div class="controls">
          <!-- Panel de botones (móvil/desktop) -->
          <div class="control-panel" id="controlPanel" aria-label="Controles de juego">
            <div class="cp-title">Acción del turno</div>

            <div class="cp-grid">
              <!-- MIRILLA VERTICAL -->
              <div class="cp-group">
                <div class="cp-label">Mirilla vertical</div>
                <div class="cp-row">
                  <button class="cp-btn" data-action-type="AIM" data-dx="0" data-dy="-2">↑↑</button>
                  <button class="cp-btn" data-action-type="AIM" data-dx="0" data-dy="-1">↑</button>
                  <button class="cp-btn" data-action-type="AIM" data-dx="0" data-dy="1">↓</button>
                  <button class="cp-btn" data-action-type="AIM" data-dx="0" data-dy="2">↓↓</button>
                </div>
              </div>

              <!-- MIRILLA HORIZONTAL -->
              <div class="cp-group">
                <div class="cp-label">Mirilla horizontal</div>
                <div class="cp-row">
                  <button class="cp-btn" data-action-type="AIM" data-dx="-2" data-dy="0">←←</button>
                  <button class="cp-btn" data-action-type="AIM" data-dx="-1" data-dy="0">←</button>
                  <button class="cp-btn" data-action-type="AIM" data-dx="1" data-dy="0">→</button>
                  <button class="cp-btn" data-action-type="AIM" data-dx="2" data-dy="0">→→</button>
                </div>
              </div>

              <!-- MOVER TANQUE -->
              <div class="cp-group">
                <div class="cp-label">Mover tanque</div>
                <div class="cp-row">
                  <button class="cp-btn" data-action-type="MOVE" data-steps="-2">-2</button>
                  <button class="cp-btn" data-action-type="MOVE" data-steps="-1">-1</button>
                  <button class="cp-btn" data-action-type="MOVE" data-steps="1">+1</button>
                  <button class="cp-btn" data-action-type="MOVE" data-steps="2">+2</button>
                </div>
              </div>

              <!-- ACCIONES DIRECTAS -->
              <div class="cp-group">
                <div class="cp-label">Acciones</div>
                <div class="cp-row">
                  <button class="cp-btn cp-btn-secondary" data-action-type="TURN">Girar</button>
                  <button class="cp-btn cp-btn-primary" data-action-type="FIRE">Disparar</button>
                  <button class="cp-btn cp-btn-secondary" data-action-type="WAIT">Esperar</button>
                </div>
              </div>
            </div>

            <div class="cp-hint" id="controlHint">
              Si eres A o B, elige <strong>una</strong> acción por turno.
            </div>
          </div>

          <!-- Reglas (las dejamos) -->
          <div class="hint" style="margin-top:10px">
            <strong>Reglas básicas</strong>
            <ul>
              <li>Ambos jugadores eligen <strong>una acción por turno</strong></li>
              <li>Las acciones se resuelven <strong>simultáneamente</strong></li>
              <li>Los tanques tienen una <strong>dirección</strong> (↑ ↓ ← →) que afecta al movimiento</li>
              <li>Las bombas explotan en cruz “+” (centro + N/S/E/W)</li>
              <li>Los muros claros se destruyen; los oscuros son indestructibles</li>
              <li>Si un tanque muere, <strong>reaparece en su base</strong></li>
            </ul>
          </div>
        </div>
        
    </section>

    <!-- PIE -->
    <footer class="footer">
      <span>tankes — prototipo · v0.6.3</span>
    </footer>
  </main>

  <!-- MODAL KO -->
  <div id="koModal" class="modal-overlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="koTitle">
      <div class="modal-title" id="koTitle">Eliminación</div>
      <div class="modal-body" id="koText">—</div>
      <div class="modal-actions">
        <button id="koContinueBtn" class="btn">Continuar</button>
      </div>
    </div>
  </div>

  <!-- Socket.IO -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js?v=0.6.3"></script>
</body>
</html>
